(function(e){function t(t){for(var r,i,s=t[0],m=t[1],u=t[2],c=0,p=[];c<s.length;c++)i=s[c],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in m)Object.prototype.hasOwnProperty.call(m,r)&&(e[r]=m[r]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var m=n[s];0!==o[m]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/iview-comment-tree/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],m=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=m;a.push(["deb2","chunk-vendors"]),n()})({"002d":function(e,t){e.exports=iview},1600:function(e,t,n){"use strict";n("7926")},"72ad":function(e,t,n){"use strict";n("d5d9")},7926:function(e,t,n){},"8bbf":function(e,t){e.exports=Vue},d5d9:function(e,t,n){},deb2:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("8bbf"),o=n.n(r),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("iview-comment-tree",{staticClass:"middle",attrs:{comments:e.comments,avatarSize:"large"},on:{"on-comment":e.reply}})],1)},i=[],s={name:"App",data:function(){return{comments:[{username:"userA",content:"hello",createTime:Date.now()},{username:"userB",content:"test",createTime:Date.now(),replyComments:[{username:"userB",content:"How are you",createTime:Date.now()}]}]}},methods:{reply:function(e){var t={content:e.content,username:"anonymous",createTime:Date.now()};null!=e.reply?(Array.isArray(e.reply.replyComments)||this.$set(e.reply,"replyComments",[]),e.reply.replyComments.push(t)):this.comments.push(t),window.localStorage&&window.localStorage.setItem("IviewCommentExample",JSON.stringify(this.comments))}},created:function(){if(window.localStorage){var e=JSON.parse(window.localStorage.getItem("IviewCommentExample"));null!=e&&(this.comments=e)}}},m=s,u=(n("1600"),n("2877")),l=Object(u["a"])(m,a,i,!1,null,"293082e6",null),c=l.exports,p=n("002d"),d=n.n(p),f=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("i-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:e.placeholders},model:{value:e.inputComment,callback:function(t){e.inputComment=t},expression:"inputComment"}}),n("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[n("Button",{staticStyle:{"margin-right":"10px"},on:{click:e.cancel}},[e._v("取消")]),n("Button",{attrs:{type:"primary",round:""},on:{click:e.commitComment}},[e._v("确定")])],1),n("iview-comment-tree-inner",{attrs:{comments:e.comments}})],1)}),h=[],y=(n("a9e3"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("List",{attrs:{"item-layout":"vertical",size:"small",split:!1}},e._l(e.pageComments,(function(t){return n("ListItem",{key:t._id},[n("ListItem",[n("div",{staticClass:"comment-wrapper"},[n("Avatar",{attrs:{size:e.avatarSize,src:t.avatar,icon:"ios-person"}}),n("div",{staticClass:"comment-inner"},[n("span",{staticStyle:{color:"#2d9aff"}},[e._v(e._s(t.username))]),n("li",[e._v(e._s(t.content))])])],1),n("template",{slot:"action"},[n("li",{staticStyle:{cursor:"default"}},[n("Icon",{attrs:{type:"ios-calendar-outline"}}),e._v(" "+e._s(e.RenderTime(t.createTime))+" ")],1),t.replyComments&&t.replyComments.length>0?n("li",{staticClass:"action-button"},[n("span",{staticClass:"button",on:{click:function(n){return e.unfold(t)}}},[n("Icon",{attrs:{type:e.unfoldItem==t?"md-arrow-dropup":"md-arrow-dropdown"}}),e._v(e._s(e.unfoldItem==t?"隐藏":"显示"+t.replyComments.length+"条")+"回复")],1)]):e._e(),n("li",{staticClass:"action-button"},[n("span",{staticClass:"button",on:{click:function(n){return e.showCommentInput(t)}}},[n("Icon",{attrs:{type:"ios-chatbubbles-outline"}}),e._v(" 回复")],1)])])],2),t.replyComments&&e.unfoldItem==t?n("div",{staticStyle:{margin:"0 0 0 30px"}},[n("iview-comment-tree-inner",{attrs:{comments:t.replyComments}})],1):e._e(),n("Divider")],1)})),1),e.comments&&e.comments.length>e.pageSize?n("Page",{staticStyle:{textalign:"center"},attrs:{total:e.comments?e.comments.length:0,"page-size":e.pageSize,current:e.pageIndex},on:{"update:current":function(t){e.pageIndex=t}}}):e._e()],1)}),v=[],g=(n("fb6a"),{name:"IviewCommentTreeInner",inject:["pageSize","RenderTime","showCommentInput","avatarSize"],props:{comments:Array},data:function(){return{unfoldItem:{},pageIndex:1}},computed:{pageComments:function(){var e,t=this.pageIndex,n=this.pageSize;return(null===(e=this.comments)||void 0===e?void 0:e.slice((t-1)*n,t*n))||[]}},methods:{unfold:function(e){this.unfoldItem=e}}}),w=g,b=(n("72ad"),Object(u["a"])(w,y,v,!1,null,"5e7ec383",null)),C=b.exports,S={name:"IviewCommentTree",components:{IviewCommentTreeInner:C},props:{pageSize:{type:Number,default:10,validate:function(e){return!isNaN(e)&&e>0}},comments:{type:Array,default:function(){return[{_id:"aaa",username:"userA",content:"hello",createTime:Date.now(),replyComments:[{_id:"bbb",username:"userB",content:"How are you",createTime:Date.now(),replyComments:[]}]},{_id:"zzz",username:"userB",content:"test",createTime:Date.now(),replyComments:[]}]}},defaultPlaceholder:{type:String,default:"写下你的评论"},RenderTime:{type:Function,default:function(e){e=new Date(e);var t=(new Date-e)/1e3;return t<1?"刚刚":t<60?Math.round(t)+"秒前":t<3600?Math.round(t/60)+"分钟前":t<86400?Math.round(t/3600)+"小时前":e.toLocaleDateString()}},avatarSize:{type:[Number,String],default:"small"}},computed:{placeholders:function(){var e;return null!=(null===(e=this.reply)||void 0===e?void 0:e.username)?"@"+this.reply.username+":":this.defaultPlaceholder}},data:function(){return{inputComment:"",pageIndex:1,reply:null}},provide:function(){return{pageSize:this.pageSize,RenderTime:this.RenderTime,showCommentInput:this.showCommentInput,avatarSize:this.avatarSize}},methods:{cancel:function(){this.inputComment="",this.reply=null},commitComment:function(){this.inputComment?this.$emit("on-comment",{content:this.inputComment,reply:this.reply}):this.$warning&&this.$Message.warning({background:!0,content:"评论信息不能为空！"}),this.inputComment=""},showCommentInput:function(e){this.reply=e}}},_=S,I=Object(u["a"])(_,f,h,!1,null,null,null),x=I.exports;x.install=function(e){return e.component(x.name,x)};var z=x;o.a.config.productionTip=!1,o.a.use(d.a),o.a.use(z),new o.a({render:function(e){return e(c)}}).$mount("#app")}});
//# sourceMappingURL=app.0ff15ad0.js.map